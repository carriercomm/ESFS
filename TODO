
* revalidate in-snapshot mfds when a new snapshot is created

* Try mmap for the map files.

* Add permission checking to all sn read operations

* Cache part of the map in the mfd (or fsdata) as a bitmap




- After a file has been moved away, pretend that the path didn't exist in the snapshot by setting up an empty MFD
- Avoid getting lock when saving a file getting overwritten by a rename
- Introduced an all_saved flag which prevents trying to open a main file if it has been deleted since the snapshot

# memory leak
