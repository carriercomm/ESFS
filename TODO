
Add locking around open, truncate, remove
(There is no '0' inode, but the locking could still add a constant to
the inode when generating the label so that some special-purpose negative
lock labels could be used.)

Add "all_already_saved" flag to mapheader; set in truncate if newsize==0 and rm,
read it in $n_open and set datfd to negative if true

Ensure all functions are static
